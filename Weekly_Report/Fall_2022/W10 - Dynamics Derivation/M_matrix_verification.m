clear all; clc;
syms L1 L2 m1 m2 theta1 theta2;
try
M=[(1/48).*L1.^2.*m1+(1/48).*L2.^2.*m2+L1.^2.*m1.*theta1.^(-4).*(2+theta1.^2+(-2).*cos(theta1)+(-2).*theta1.*sin(theta1))...
+m2.*theta1.^(-4).*theta2.^(-2).*((theta1.*(L2.*theta1+(-1).*L1.*theta2).*cos(theta1)+(-1).*L2.*theta1.^2.* ...
  cos(theta1+theta2)+L1.*theta2.*sin(theta1)).^2+(L1.*theta2+(-1).*L1.*theta2.*cos(theta1) ...
  +theta1.*(L2.*theta1+(-1).*L1.*theta2).*sin(theta1)+(-1)...
.*L2.*theta1.^2.*sin(theta1+ ...
  theta2)).^2),(1/48).*L2.*m2.*theta1.^(-2).*theta2.^(-2).*((-48).*L1+48.*L2.*theta1.^2+L2.*theta1.^2.*theta2.^2+48.*L1.*cos(theta1)+48.*(L1+(-1).* ...
  L2.*theta1.^2+L1.*theta1.*theta2).*cos(theta2)+(-48).*L1.*cos(theta1+theta2)+(-48).* ...
  L1.*theta1.*sin(theta2)+48.*L1.*theta2.*sin(theta2)+(-48).*L1.*theta2.*sin(theta1+ ...
  theta2));(1/48).*L2.*m2.*theta1.^(-2).*theta2.^(-2).*((-48).*L1+48.*L2.* ...
  theta1.^2+L2.*theta1.^2.*theta2.^2+48.*L1.*cos(theta1)+...
48.*(L1+(-1).*L2.* ...
  theta1.^2+L1.*theta1.*theta2).*cos(theta2)+(-48).*L1.*...
cos(theta1+theta2)+(-48).*L1.* ...
  theta1.*sin(theta2)+48.*L1.*theta2.*sin(theta2)+(-48).*...
L1.*theta2.*sin(theta1+theta2)),(1/48).*L2.^2.*m2.*theta2.^(-4).*(96+48.*theta2.^2+theta2.^...
4+(-96).*cos(theta2)+(-96).*theta2.*sin(theta2))];
catch
M(1,1)=(1/48).*L1.^2.*m1+(1/48).*L2.^2.*m2+L1.^2.*m1.*theta1.^(-4).*(2+theta1.^2+(-2).*cos(theta1)+(-2).*theta1.*sin(theta1))+m2.*theta1.^(-4).*theta2.^(-2).*((theta1.*(L2.*theta1+(-1).*L1.*theta2).*cos(theta1)+(-1).*L2.*theta1.^2.* ...
  cos(theta1+theta2)+L1.*theta2.*sin(theta1)).^2+(L1.*theta2+(-1).*L1.*theta2.*cos(theta1) ...
  +theta1.*(L2.*theta1+(-1).*L1.*theta2).*sin(theta1)+(-1)...
.*L2.*theta1.^2.*sin(theta1+ ...
  theta2)).^2);
M(1,2)=(1/48).*L2.*m2.*theta1.^(-2).*theta2.^(-2).*((-48).*L1+48.*L2.*theta1.^2+L2.*theta1.^2.*theta2.^2+48.*L1.*cos(theta1)+48.*(L1+(-1).* ...
  L2.*theta1.^2+L1.*theta1.*theta2).*cos(theta2)+(-48).*L1.*cos(theta1+theta2)+(-48).* ...
  L1.*theta1.*sin(theta2)+48.*L1.*theta2.*sin(theta2)+(-48).*L1.*theta2.*sin(theta1+ ...
  theta2));
M(2,1)=(1/48).*L2.*m2.*theta1.^(-2).*theta2.^(-2).*((-48).*L1+48.*L2.* ...
  theta1.^2+L2.*theta1.^2.*theta2.^2+48.*L1.*cos(theta1)+...
48.*(L1+(-1).*L2.* ...
  theta1.^2+L1.*theta1.*theta2).*cos(theta2)+(-48).*L1.*...
cos(theta1+theta2)+(-48).*L1.* ...
  theta1.*sin(theta2)+48.*L1.*theta2.*sin(theta2)+(-48).*...
L1.*theta2.*sin(theta1+theta2));
M(2,2)=(1/48).*L2.^2.*m2.*theta2.^(-4).*(96+48.*theta2.^2+theta2.^...
4+(-96).*cos(theta2)+(-96).*theta2.*sin(theta2));
end